import React from 'react'

import { NavLink, Link, withRouter } from 'react-router-dom'
import cn from 'classnames'

import { checkRoles, exit } from '../redux/actions/user'

import logo from '../static/result.webp'

const checkPath = (path, checkPathChuck) => path.includes(checkPathChuck)


const Header = React.memo(function Header({ location, activeModalHandle, user, dispatch }) {
    const [showMobileMenu, setShowMobileMenu] = React.useState(false)

    const mobileMenuHandle = () => {
        setShowMobileMenu(prev => !prev)
    }

    return (
        <section className={cn("header", {
            'header-news': checkPath(location.pathname, 'news'),
            'header-trainers': checkPath(location.pathname, 'trainers'),
            'header-timetable': checkPath(location.pathname, 'timetable'),
            'header-sport': checkPath(location.pathname, 'sport'),
            'header-contacts': checkPath(location.pathname, 'contacts'),
            'header-about_us': checkPath(location.pathname, 'about_us'),
            'header-profile': checkPath(location.pathname, 'profile'),
            'header-admin': checkPath(location.pathname, 'admin'),
            'header-groups': checkPath(location.pathname, 'groups'),
        })}>
            <div className="header__social_logo">
                <Link to='/'>
                    <img src={logo} alt="123" className="header__social_logo__logo" />
                </Link>
                <ul className="header__social_logo__social">
                    {/* <a href="https://www.vk.com/">
                        <li>
                            <svg
                                className="header__social_logo__social-svg"
                                enable-background="new 0 0 26 26"
                                viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="m12.145 19.5c3.472 0 2.234-2.198 2.502-2.83-.004-.472-.008-.926.008-1.202.22.062.739.325 1.811 1.367 1.655 1.67 2.078 2.665 3.415 2.665h2.461c.78 0 1.186-.323 1.389-.594.196-.262.388-.722.178-1.438-.549-1.724-3.751-4.701-3.95-5.015.03-.058.078-.135.103-.175h-.002c.632-.835 3.044-4.449 3.399-5.895.001-.002.002-.005.002-.008.192-.66.016-1.088-.166-1.33-.274-.362-.71-.545-1.299-.545h-2.461c-.824 0-1.449.415-1.765 1.172-.529 1.345-2.015 4.111-3.129 5.09-.034-1.387-.011-2.446.007-3.233.036-1.535.152-3.029-1.441-3.029h-3.868c-.998 0-1.953 1.09-.919 2.384.904 1.134.325 1.766.52 4.912-.76-.815-2.112-3.016-3.068-5.829-.268-.761-.674-1.466-1.817-1.466h-2.461c-.998 0-1.594.544-1.594 1.455 0 2.046 4.529 13.544 12.145 13.544zm-8.09-13.499c.217 0 .239 0 .4.457.979 2.883 3.175 7.149 4.779 7.149 1.205 0 1.205-1.235 1.205-1.7l-.001-3.702c-.066-1.225-.512-1.835-.805-2.205l3.508.004c.002.017-.02 4.095.01 5.083 0 1.403 1.114 2.207 2.853.447 1.835-2.071 3.104-5.167 3.155-5.293.075-.18.14-.241.376-.241h2.461.01c-.001.003-.001.006-.002.009-.225 1.05-2.446 4.396-3.189 5.435-.012.016-.023.033-.034.05-.327.534-.593 1.124.045 1.954h.001c.058.07.209.234.429.462.684.706 3.03 3.12 3.238 4.08-.138.022-.288.006-2.613.011-.495 0-.882-.74-2.359-2.23-1.328-1.292-2.19-1.82-2.975-1.82-1.524 0-1.413 1.237-1.399 2.733.005 1.622-.005 1.109.006 1.211-.089.035-.344.105-1.009.105-6.345 0-10.477-10.071-10.636-11.996.055-.005.812-.002 2.546-.003z"
                                    fill="white"
                                    stroke="#222222"
                                    strokeWidth="0.6"
                                />
                            </svg>
                        </li>
                    </a> */}
                    <a href="https://www.facebook.com/" target="_blank" rel="noreferrer">
                        <li>
                            <svg
                                className="header__social_logo__social-svg"
                                viewBox="0 0 26 26"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M2.93258 26H12.4703C12.9187 26 13.2828 25.636 13.2828 25.1875C13.2828 25.0142 13.2719 17.7775 13.2708 17.6042C13.2708 17.1557 12.9068 16.7917 12.4583 16.7917H10.0208V14.0833H12.4583C12.9068 14.0833 13.2708 13.7193 13.2708 13.2708V10.2191C13.2708 7.57142 15.4256 5.41667 18.0733 5.41667H20.3125V8.125H18.9583C17.9129 8.125 17.0625 8.97542 17.0625 10.0208V13.2708C17.0625 13.7193 17.4265 14.0833 17.875 14.0833H21.1683L20.4913 16.7917H17.875C17.4265 16.7917 17.0625 17.1557 17.0625 17.6042V25.1875C17.0625 25.636 17.4265 26 17.875 26H23.0674C24.6848 26 26 24.6848 26 23.0674V2.93258C26 1.31517 24.6848 0 23.0674 0H2.93258C1.31517 0 0 1.31517 0 2.93258V23.0685C0 24.6848 1.31517 26 2.93258 26ZM1.625 2.93258C1.625 2.21108 2.21108 1.625 2.93258 1.625H23.0685C23.79 1.625 24.3761 2.21108 24.3761 2.93258V23.0685C24.3761 23.79 23.79 24.3761 23.0685 24.3761H18.6875V18.4167H21.125C21.4977 18.4167 21.8227 18.1632 21.9137 17.8013L22.997 13.468C23.1248 12.9556 22.7381 12.4583 22.2083 12.4583H18.6875V10.0208C18.6875 9.8735 18.811 9.75 18.9583 9.75H21.125C21.5735 9.75 21.9375 9.386 21.9375 8.9375V4.60417C21.9375 4.15567 21.5735 3.79167 21.125 3.79167H18.0733C14.5297 3.79167 11.6458 6.6755 11.6458 10.2191V12.4583H9.20833C8.75983 12.4583 8.39583 12.8223 8.39583 13.2708V17.6042C8.39583 18.0527 8.75983 18.4167 9.20833 18.4167H11.6458V24.375H2.93258C2.21108 24.375 1.625 23.7889 1.625 23.0674V2.93258Z"
                                    fill="white"
                                    stroke="#222222"
                                    strokeWidth="0.6"
                                />
                            </svg>
                        </li>
                    </a>
                    <a href="https://www.instagram.com/" target="_blank" rel="noreferrer">
                        <li>
                            <svg
                                className="header__social_logo__social-svg"
                                viewBox="0 0 26 26"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M13.2559 26.0004C13.1698 26.0004 13.0837 26.0004 12.997 26C10.959 26.0049 9.07596 25.9532 7.24466 25.8417C5.5657 25.7395 4.03314 25.1593 2.81241 24.1639C1.63452 23.2034 0.830154 21.9048 0.421722 20.3043C0.0662537 18.911 0.0474091 17.5433 0.0293579 16.2204C0.0162658 15.2712 0.0027771 14.1465 0 13.0027C0.0027771 11.8542 0.0162658 10.7295 0.0293579 9.78032C0.0474091 8.45762 0.0662537 7.0899 0.421722 5.69639C0.830154 4.09599 1.63452 2.79729 2.81241 1.83681C4.03314 0.84142 5.5657 0.261204 7.24486 0.159046C9.07616 0.0477634 10.9596 -0.00420808 13.002 0.000751034C15.0406 -0.00361298 16.923 0.0477634 18.7543 0.159046C20.4333 0.261204 21.9659 0.84142 23.1866 1.83681C24.3647 2.79729 25.1689 4.09599 25.5773 5.69639C25.9328 7.0897 25.9516 8.45762 25.9697 9.78032C25.9827 10.7295 25.9964 11.8542 25.999 12.998V13.0027C25.9964 14.1465 25.9827 15.2712 25.9697 16.2204C25.9516 17.5431 25.933 18.9108 25.5773 20.3043C25.1689 21.9048 24.3647 23.2034 23.1866 24.1639C21.9659 25.1593 20.4333 25.7395 18.7543 25.8417C17.0006 25.9484 15.1991 26.0004 13.2559 26.0004ZM12.997 23.9687C15.0019 23.9735 16.8427 23.9229 18.631 23.8142C19.9005 23.737 21.0012 23.325 21.903 22.5897C22.7365 21.9099 23.3106 20.972 23.6091 19.8021C23.9051 18.6423 23.9221 17.3969 23.9386 16.1926C23.9515 15.2498 23.965 14.133 23.9678 13.0004C23.965 11.8675 23.9515 10.7509 23.9386 9.80809C23.9221 8.60382 23.9051 7.35849 23.6091 6.19845C23.3106 5.0285 22.7365 4.09063 21.903 3.41083C21.0012 2.6757 19.9005 2.26369 18.631 2.18653C16.8427 2.07763 15.0019 2.02744 13.0018 2.0318C10.9973 2.02704 9.1563 2.07763 7.36804 2.18653C6.09851 2.26369 4.99779 2.6757 4.09602 3.41083C3.2625 4.09063 2.68843 5.0285 2.38989 6.19845C2.09393 7.35849 2.07687 8.60362 2.06041 9.80809C2.04752 10.7517 2.03403 11.8691 2.03125 13.0027C2.03403 14.1314 2.04752 15.249 2.06041 16.1926C2.07687 17.3969 2.09393 18.6423 2.38989 19.8021C2.68843 20.972 3.2625 21.9099 4.09602 22.5897C4.99779 23.3248 6.09851 23.7368 7.36804 23.814C9.1563 23.9229 10.9977 23.9737 12.997 23.9687ZM12.9486 19.348C9.44868 19.348 6.60097 16.5005 6.60097 13.0004C6.60097 9.50023 9.44868 6.65271 12.9486 6.65271C16.4488 6.65271 19.2963 9.50023 19.2963 13.0004C19.2963 16.5005 16.4488 19.348 12.9486 19.348ZM12.9486 8.68396C10.5686 8.68396 8.63222 10.6204 8.63222 13.0004C8.63222 15.3803 10.5686 17.3168 12.9486 17.3168C15.3288 17.3168 17.265 15.3803 17.265 13.0004C17.265 10.6204 15.3288 8.68396 12.9486 8.68396ZM20.0072 4.62145C19.166 4.62145 18.4838 5.30343 18.4838 6.14489C18.4838 6.98635 19.166 7.66833 20.0072 7.66833C20.8487 7.66833 21.5307 6.98635 21.5307 6.14489C21.5307 5.30343 20.8487 4.62145 20.0072 4.62145Z"
                                    fill="white"
                                    stroke="#222222"
                                />
                            </svg>
                        </li>
                    </a>
                </ul>
                <svg className="burger" onClick={mobileMenuHandle} width="28" height="20" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1.09375 8.88892H26.9062C27.5103 8.88892 28 9.38636 28 10C28 10.6137 27.5103 11.1111 26.9062 11.1111H1.09375C0.489672 11.1111 0 10.6137 0 10C0 9.38636 0.489672 8.88892 1.09375 8.88892Z" fill="white" />
                    <path d="M1.09375 0H26.9062C27.5103 0 28 0.497445 28 1.11111C28 1.72478 27.5103 2.22222 26.9062 2.22222H1.09375C0.489672 2.22222 0 1.72478 0 1.11111C0 0.497445 0.489672 0 1.09375 0Z" fill="white" />
                    <path d="M1.09375 17.7753H26.9062C27.5103 17.7753 28 18.2733 28 18.8876C28 19.502 27.5103 20 26.9062 20H1.09375C0.489672 20 0 19.502 0 18.8876C0 18.2733 0.489672 17.7753 1.09375 17.7753Z" fill="white" />
                </svg>
            </div>
            <div className="menu-wrapper">
                <ul className={cn("menu", { show: showMobileMenu })}>
                    <div className="menu-block">
                        <span className="menu__close close_btn" onClick={() => setShowMobileMenu(false)}>
                            &times;
                        </span>
                        <li className="menu__item enrollment" onClick={activeModalHandle}>Записаться</li>
                        <li className="menu__item">
                            <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/timetable" className="menu-link">Расписание</NavLink>
                        </li>
                        <li className="menu__item">
                            <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/news" className="menu-link">Новости</NavLink>
                        </li>
                        <li className="menu__item">
                            <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/trainers" className="menu-link">Тренера</NavLink>
                        </li>
                    </div>
                    <div className="menu-block">
                        {/* <li className="menu__item">
                            <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/events" className="menu-link">Мероприятия</NavLink>
                        </li> */}
                        <li className="menu__item">
                            <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/about_us" className="menu-link">О нас</NavLink>
                        </li>
                        <li className="menu__item">
                            <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/contacts" className="menu-link">Контакты</NavLink>
                        </li>
                        {!user && (
                            <li className="menu__item">
                                <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/auth" className="menu-link">Вход</NavLink>
                            </li>
                        )}
                        {!!user && (
                            <>
                                {checkRoles(user.roles, 'Администратор') &&
                                    <li className="menu__item">
                                        <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/admin" className="menu-link">Админ</NavLink>
                                    </li>
                                }

                                {checkRoles(user.roles, 'Тренер') &&
                                    <li className="menu__item">
                                        <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/groups" className="menu-link">Мои группы</NavLink>
                                    </li>
                                }

                                {checkRoles(user.roles, 'Танцор') &&
                                    <li className="menu__item">
                                        <NavLink onClick={mobileMenuHandle} activeClassName="active" to="/profile" className="menu-link">Профиль</NavLink>
                                    </li>
                                }

                                <li className="menu__item" onClick={() => dispatch(exit())}>
                                    Выход
                                </li>
                            </>
                        )}
                    </div>
                    <ul className="menu__social">
                        <a href="https://www.facebook.com/" target="_blank" rel="noreferrer">
                            <li>
                                <svg className="menu__social-svg" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clipPath="url(#clip0)">
                                        <path d="M2.93258 26H12.4703C12.9187 26 13.2828 25.636 13.2828 25.1875C13.2828 25.0142 13.2719 17.7775 13.2708 17.6042C13.2708 17.1557 12.9068 16.7917 12.4583 16.7917H10.0208V14.0833H12.4583C12.9068 14.0833 13.2708 13.7193 13.2708 13.2708V10.2191C13.2708 7.57142 15.4256 5.41667 18.0733 5.41667H20.3125V8.125H18.9583C17.9129 8.125 17.0625 8.97542 17.0625 10.0208V13.2708C17.0625 13.7193 17.4265 14.0833 17.875 14.0833H21.1683L20.4913 16.7917H17.875C17.4265 16.7917 17.0625 17.1557 17.0625 17.6042V25.1875C17.0625 25.636 17.4265 26 17.875 26H23.0674C24.6848 26 26 24.6848 26 23.0674V2.93258C26 1.31517 24.6848 0 23.0674 0H2.93258C1.31517 0 0 1.31517 0 2.93258V23.0685C0 24.6848 1.31517 26 2.93258 26ZM1.625 2.93258C1.625 2.21108 2.21108 1.625 2.93258 1.625H23.0685C23.79 1.625 24.3761 2.21108 24.3761 2.93258V23.0685C24.3761 23.79 23.79 24.3761 23.0685 24.3761H18.6875V18.4167H21.125C21.4977 18.4167 21.8227 18.1632 21.9137 17.8013L22.997 13.468C23.1248 12.9556 22.7381 12.4583 22.2083 12.4583H18.6875V10.0208C18.6875 9.8735 18.811 9.75 18.9583 9.75H21.125C21.5735 9.75 21.9375 9.386 21.9375 8.9375V4.60417C21.9375 4.15567 21.5735 3.79167 21.125 3.79167H18.0733C14.5297 3.79167 11.6458 6.6755 11.6458 10.2191V12.4583H9.20833C8.75983 12.4583 8.39583 12.8223 8.39583 13.2708V17.6042C8.39583 18.0527 8.75983 18.4167 9.20833 18.4167H11.6458V24.375H2.93258C2.21108 24.375 1.625 23.7889 1.625 23.0674V2.93258Z" fill="white" stroke="#222222" strokeWidth="0.6" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0">
                                            <rect width="100%" height="100%" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>
                            </li>
                        </a>
                        <a href="https://www.instagram.com/" target="_blank" rel="noreferrer">
                            <li>
                                <svg className="menu__social-svg" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clipPath="url(#clip0)">
                                        <path d="M13.2559 26.0004C13.1698 26.0004 13.0837 26.0004 12.997 26C10.959 26.0049 9.07596 25.9532 7.24466 25.8417C5.5657 25.7395 4.03314 25.1593 2.81241 24.1639C1.63452 23.2034 0.830154 21.9048 0.421722 20.3043C0.0662537 18.911 0.0474091 17.5433 0.0293579 16.2204C0.0162658 15.2712 0.0027771 14.1465 0 13.0027C0.0027771 11.8542 0.0162658 10.7295 0.0293579 9.78032C0.0474091 8.45762 0.0662537 7.0899 0.421722 5.69639C0.830154 4.09599 1.63452 2.79729 2.81241 1.83681C4.03314 0.84142 5.5657 0.261204 7.24486 0.159046C9.07616 0.0477634 10.9596 -0.00420808 13.002 0.000751034C15.0406 -0.00361298 16.923 0.0477634 18.7543 0.159046C20.4333 0.261204 21.9659 0.84142 23.1866 1.83681C24.3647 2.79729 25.1689 4.09599 25.5773 5.69639C25.9328 7.0897 25.9516 8.45762 25.9697 9.78032C25.9827 10.7295 25.9964 11.8542 25.999 12.998V13.0027C25.9964 14.1465 25.9827 15.2712 25.9697 16.2204C25.9516 17.5431 25.933 18.9108 25.5773 20.3043C25.1689 21.9048 24.3647 23.2034 23.1866 24.1639C21.9659 25.1593 20.4333 25.7395 18.7543 25.8417C17.0006 25.9484 15.1991 26.0004 13.2559 26.0004ZM12.997 23.9687C15.0019 23.9735 16.8427 23.9229 18.631 23.8142C19.9005 23.737 21.0012 23.325 21.903 22.5897C22.7365 21.9099 23.3106 20.972 23.6091 19.8021C23.9051 18.6423 23.9221 17.3969 23.9386 16.1926C23.9515 15.2498 23.965 14.133 23.9678 13.0004C23.965 11.8675 23.9515 10.7509 23.9386 9.80809C23.9221 8.60382 23.9051 7.35849 23.6091 6.19845C23.3106 5.0285 22.7365 4.09063 21.903 3.41083C21.0012 2.6757 19.9005 2.26369 18.631 2.18653C16.8427 2.07763 15.0019 2.02744 13.0018 2.0318C10.9973 2.02704 9.1563 2.07763 7.36804 2.18653C6.09851 2.26369 4.99779 2.6757 4.09602 3.41083C3.2625 4.09063 2.68843 5.0285 2.38989 6.19845C2.09393 7.35849 2.07687 8.60362 2.06041 9.80809C2.04752 10.7517 2.03403 11.8691 2.03125 13.0027C2.03403 14.1314 2.04752 15.249 2.06041 16.1926C2.07687 17.3969 2.09393 18.6423 2.38989 19.8021C2.68843 20.972 3.2625 21.9099 4.09602 22.5897C4.99779 23.3248 6.09851 23.7368 7.36804 23.814C9.1563 23.9229 10.9977 23.9737 12.997 23.9687ZM12.9486 19.348C9.44868 19.348 6.60097 16.5005 6.60097 13.0004C6.60097 9.50023 9.44868 6.65271 12.9486 6.65271C16.4488 6.65271 19.2963 9.50023 19.2963 13.0004C19.2963 16.5005 16.4488 19.348 12.9486 19.348ZM12.9486 8.68396C10.5686 8.68396 8.63222 10.6204 8.63222 13.0004C8.63222 15.3803 10.5686 17.3168 12.9486 17.3168C15.3288 17.3168 17.265 15.3803 17.265 13.0004C17.265 10.6204 15.3288 8.68396 12.9486 8.68396ZM20.0072 4.62145C19.166 4.62145 18.4838 5.30343 18.4838 6.14489C18.4838 6.98635 19.166 7.66833 20.0072 7.66833C20.8487 7.66833 21.5307 6.98635 21.5307 6.14489C21.5307 5.30343 20.8487 4.62145 20.0072 4.62145Z" fill="white" stroke="#222222" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0">
                                            <rect width="100%" height="100%" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>
                            </li>
                        </a>
                    </ul>
                </ul>
            </div>
        </section >
    )
})

export default withRouter(Header);
